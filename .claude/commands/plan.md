---
name: "plan"
description: "进入规划模式 - 分析现状、设计方案、等待确认后再执行"
argument-hint: <问题/任务描述>
---

# Plan 指令 — 通用规划模式

> 核心理念：先想透，再做稳，记下来。

---

## 功能

1. **现状分析** - 收集信息，理解当前状况
2. **需求澄清** - 明确要做什么，不做什么
3. **方案设计** - 提出可行的解决方案
4. **风险评估** - 识别潜在问题和阻碍
5. **等待确认** - 必须收到用户批准才执行

---

## 使用场景

| 类型 | 场景示例 |
|------|----------|
| **代码任务** | 新功能、重构、多文件修改、架构调整 |
| **决策问题** | 技术选型、方案对比、采购决策 |
| **流程设计** | SOP制定、工作流优化、体系建设 |
| **问题排查** | 系统性调试、根因分析、解决方案设计 |

---

## 工作流程

```
输入 /plan
    ↓
1. 收集信息 - 读相关文件、分析现状
    ↓
2. 澄清需求 - 问清楚要解决什么问题
    ↓
3. 设计方案 - 提出方案A/B/C，说明优劣
    ↓
4. 评估风险 - 列出潜在问题和应对
    ↓
5. 等待确认 - 用户说"执行"才开始
```

---

## 输出格式

```markdown
# 规划：[问题/任务标题]

## 📊 现状分析
- 当前情况：[描述]
- 已有资源：[列出]
- 关键约束：[列出]

## 🎯 需求澄清
- 核心诉求：[一句话]
- 成功标准：[可验证的标准]
- 不做什么：[明确边界]

## 💡 方案设计

### 方案A：[名称]
- 思路：[简述]
- 优势：[列出]
- 劣势：[列出]

### 方案B：[名称]
[同上]

**推荐**：方案 [X] - [理由]

## ⚠️ 风险评估
| 风险 | 严重程度 | 应对措施 |
|------|----------|----------|
| [风险1] | 高/中/低 | [应对] |

## 📋 执行步骤
1. [步骤1]
2. [步骤2]

---

**等待确认**：执行哪个方案？或需要调整？
```

---

## 与其他指令配合

| 指令 | 作用 |
|------|------|
| `/checklist` | 执行计划时逐项核实 |
| `/observer` | 观察对话过程，记录洞察 |
| `/UPDATE_MEMORY` | 完成后固化经验 |

---

## 重要说明

**关键原则**：
- 不写代码，不执行操作，只规划
- 等待明确确认（"执行"、"开始"、"go"等）才开始
- 不确定时主动问，不假设答案
- 复杂任务必用，简单任务可选

---

*最后更新：2026-02-22 — 精简优化版*
