---
name: "checklist"
description: "上下文整理与步骤核实 - 提取对话中的任务项，逐项确认完成状态"
argument-hint: <可选：检查范围>
---

# Checklist 指令 — 上下文核实工具

> 从"任务清单"升级为"上下文整理器"：提取对话中提到的所有事项，核实状态，确保不遗漏

**核心理念**：对话结束前，确认每件事都完成了。

---

## 功能

1. **上下文扫描** - 扫描对话历史，提取所有提到的任务/问题
2. **分类整理** - 区分已完成、进行中、未开始
3. **状态核实** - 逐项确认是否真的完成了
4. **遗漏检查** - 提醒可能被忽略的事项
5. **可执行性** - AI 可根据清单继续执行

---

## 工作流程

```
输入 /checklist
    ↓
1. 扫描对话 - 提取所有任务/问题/承诺
    ↓
2. 分类整理 - 按状态和优先级分组
    ↓
3. 逐项核实 - 每项确认是否完成
    ↓
4. 识别遗漏 - 检查是否有未处理的事项
    ↓
5. 输出清单 - 可供后续执行使用
```

---

## 输出格式

```markdown
# 对话事项核实清单

## ✅ 已完成
- [x] [事项1] - [简述]
- [x] [事项2] - [简述]

## 🔄 进行中
- [ ] [事项3] - [当前状态]
- [ ] [事项4] - [当前状态]

## 📋 未开始
- [ ] [事项5] - [待处理]
- [ ] [事项6] - [待处理]

## ⚠️ 可能遗漏
- [?] [可能被忽略的事项]

---

**下一步**：继续执行哪一项？或结束对话？
```

---

## 使用示例

### 示例1：多任务对话

```
用户: /checklist

# 对话事项核实清单

## 对话回顾
本次对话涉及以下话题：
1. Hooks评估与清理
2. Commander prompt计数问题
3. Plan/Checklist改造

## ✅ 已完成
- [x] 删除3个未注册的观察者文件
- [x] 修复settings.json中的相对路径
- [x] 验证修复结果
- [x] 改造plan.md为通用规划模式

## 🔄 进行中
- [ ] 改造checklist.md为上下文核实工具（当前任务）

## 📋 未开始
- [ ] 同步更新到.claude/commands目录

## ⚠️ 可能遗漏
- [?] Commander prompt计数问题未解决
  - 你提到"两个问题统计显示四次"
  - 需要确认：统计来源是哪里？
  - 建议测试：普通消息 vs Commander消息的计数差异

---

**下一步**：继续改造checklist？还是先解决Commander问题？
```

### 示例2：复杂讨论后核实

```
用户: /checklist

# 对话事项核实清单

## 对话回顾
本次讨论关于"供应商管理体系优化"

## ✅ 已完成
- [x] 讨论选汰机制设计
- [x] 确认KPI指标体系（16项）
- [x] 规划数据看板需求

## 🔄 进行中
- [ ] 撰写《供应商管理手册》v2.0
  - 当前：已完成框架设计
  - 待完成：6大模块详细内容

## 📋 未开始
- [ ] 设计数据看板原型
- [ ] 与法务确认合规要求
- [ ] 向总监汇报方案

## ⚠️ 可能遗漏
- [?] 供应商培训计划未讨论
  - 新标准出台后，是否需要培训35家供应商？
- [?] 成本预算未确认
  - 数据看板开发成本？

---

**下一步**：优先处理哪一项？
```

---

## AI 执行模式

当用户说"按清单执行"或"继续"时：

1. **读取未完成项** - 从🔄和📋中选择
2. **按优先级排序** - 紧急/重要优先
3. **逐项执行** - 完成一项标记一项
4. **汇报进度** - 每完成几项更新一次状态

---

## 使用场景

| 场景 | 作用 |
|------|------|
| **对话结束前** | 确保没有遗漏事项 |
| **中断恢复** | 重新梳理之前进度 |
| **交接** | 让另一个AI了解当前状态 |
| **自我提醒** | 看看还有哪些没做 |

---

## 与其他指令配合

| 指令 | 作用 |
|------|------|
| `/plan` | 复杂任务前先规划 |
| `/observer` | 观察对话过程，为checklist提供素材 |
| `/learn` | 完成后固化经验 |

---

## 重要说明

**核心原则**：
- 不只是列清单，是核实状态
- 主动识别遗漏，不等用户提醒
- 清单要可执行，AI能继续干活
- 多话题对话时特别有用（防止后面的挤掉前面的）

---

*最后更新：2026-02-22 — 升级为上下文核实工具*
