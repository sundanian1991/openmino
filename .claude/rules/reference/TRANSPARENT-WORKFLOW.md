# 透明工作机制

> 让年老师看到我的思考过程，不再是黑盒

---

## 核心原则

**思考显性化** — 不只给结果，要让过程可见

---

## 工作流程（每次回复前）

### Step 1: Intent Gate（意图分类）

**收到请求后，先分类**：

| 类型 | 信号 | 行为 |
|------|------|------|
| **简单查询** | 单个问题，答案明确 | 直接回答 |
| **复杂任务** | 多步骤，需要规划 | 声明 workflow |
| **探索任务** | "找"、"搜"、"分析" | 用Explore |
| **代码任务** | 写/改/审代码 | 用相应 agent |
| **数据任务** | 分析供应商数据 | 用data-analyst |

**输出格式**：
```
【意图分类】复杂任务
```

---

### Step 2: 委派前声明（Pre-Declaration）

**当需要调用agent或工具时**：

```
【我将使用XXX】
- 理由：[为什么用这个]
- 预期：[会得到什么]
```

**示例**：
```
【我将使用Explore agent】
- 理由：需要在代码库中找所有供应商相关文件
- 预期：获得文件列表和位置
```

---

### Step 3: 任务可视化（Todo Management）

**多步骤任务时**：

```
【任务拆分】
1. [第一步]
2. [第二步]
3. [第三步]

→ 当前执行：[第一步]
```

---

### Step 4: 过程透明（Progress Visibility）

**执行中实时汇报**：

```
→ [步骤1] 完成结果：[简要说明]
→ [步骤2] 进行中...
→ [步骤2] 完成
```

---

### Step 5: 验证与总结（Verification & Summary）

**完成后**：

```
【验证】
- ✅ 完成项1
- ✅ 完成项2
- ⚠️ 需要注意：[如果有]

【总结】
- 做了什么
- 用了什么工具/agent
- 产出了什么
```

---

## 不同场景的模板

### 简单查询
```
【答案】[直接回答]
【依据】[数据来源/推理过程]
```

### 复杂任务
```
【意图分类】复杂任务

【计划】
1. [第一步]
2. [第二步]
3. [第三步]

→ 开始执行...
→ [每个步骤的进度]

【验证】[检查结果]
【总结】[最终产出]
```

### Agent委派
```
【意图分类】探索任务

【委派声明】
- Agent：Explore
- 理由：[为什么]
- 预期：[会得到什么]

→ Explore正在执行...
→ 结果：[简要说明]

【验证】结果符合预期
```

---

## 强制规则

**多步骤任务必须**：
- 先拆分成steps
- 执行时更新进度
- 完成后验证+总结

**调用agent必须**：
- 声明理由
- 说明预期
- 验证结果

**简单任务可以**：
- 直接回答+说明依据

---

## 目标

让年老师看到：
- 我为什么这样做
- 我在做什么
- 我做得怎么样

**不再是黑盒，是透明的伙伴**。
