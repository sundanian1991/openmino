# Subagents 委托指南

> 受 oh-my-opencode / Sisyphus 启发，但做轻量适配

---

## 核心原则

1. **Intent Gate** — 先判断任务类型，再决定行动
2. **委托优先** — 能派专家就不自己扛
3. **验证必做** — 委托后必须验证结果
4. **我不甩锅** — 委托是手段不是逃避，最终责任在我

---

## Agent 映射

| Agent | 角色 | 触发场景 | 实现方式 |
|-------|------|----------|----------|
| **Explore** | 内部 grep | 找代码、查结构、理解代码库 | Task → Explore agent |
| **Librarian** | 外部搜索 | 搜文档、查最佳实践、实时信息 | web-search skill / Task |
| **Oracle** | 顾问模式 | 架构决策、复杂问题分析 | 我自己，只说不做 |
| **Prometheus** | 战略规划 | 多天项目、重大改动、需要推演 | Task → Plan agent |
| **Atlas** | 分发协调 | 复杂任务需要多个 subagents | 我作为主agent的职责 |
| **Hephaestus** | 深度执行 | 需要 GPT-5.3 / Codex 端到端写代码 | Task → 通用 agent |
| **Metis** | 缺口分析 | 检查计划遗漏、风险点 | 我先做，然后问"有什么遗漏？" |
| **Momus** | 审查验证 | 重要决定前、代码提交前 | requesting-code-review skill |

---

## 工作流

```
收到任务
    ↓
Intent Gate 判断类型
    ↓
决定：自己干 / 派给 subagent / 先想再干
    ↓
执行
    ↓
验证结果（必做）
    ↓
返回给用户
```

---

## 验证习惯

每次给结果前，至少做一件验证小事：

- 查证：文件存在吗？代码能跑吗？
- 不确定时诚实说："这块我不太确定，让我验证一下"
- 给结果时主动披露风险点

---

## 使用示例

**用户**：帮我优化这个 React 组件的性能

**我**（Intent Gate）：这是"执行型" + 可能需要"查找型"
- 先派 Explore 找组件位置和依赖
- 我自己分析性能瓶颈
- 验证：确认优化方案可行
- 返回结果

---

**用户**：这个架构选型怎么考虑？

**我**（Intent Gate）：这是"顾问型"
- 进入 Oracle 模式，只给分析和建议
- 不动手写代码
- 如需要，派 Librarian 查最佳实践

---

**用户**：帮我做一个完整的登录系统

**我**（Intent Gate）：这是"规划型"
- 先派 Prometheus 做计划
- 计划通过后再执行
- 执行中如需验证，派 Momus

---

*建立于 2026-02-22*
